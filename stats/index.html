<html>

<head>
    <title>GeoFS Addon Usage Statistics | Tylerbmusic/GGamerGGuy</title>
    <link rel="shortcut icon" href="/favicon.png" type="image/x-8con">
    <style>
        table {
            border-collapse: collapse;
            width: calc(100% - 45px);
        }

        td, th {
            border: 1px solid #444;
            text-align: left;
            padding: 8px;
        }

        tr:nth-child(even) {
            background-color: #444;
        }

        #refresh-btn {
            width: fit-content;
            background: #222;
            border: 1px solid #555;
            border-radius: 10px;
            cursor: pointer;
            position: absolute;
            right: 5px;
            transition: 0.1s;
            box-shadow: 0 0 10px 0 #111;
            filter: invert(0);
        }
        #refresh-btn:hover {
            background: #444;
            border: 1px solid #777;
            box-shadow: 0 0 10px 0 black;
        }
        #refresh-btn:active {
            background: #222;
            border: 1px solid #000;
            box-shadow: 0 0 10px 0 white;
            filter: invert(1);
        }
    </style>
</head>

<body style="background: #222; color: white; font-family: sans-serif;">
    <h1 style="text-align: center;">GeoFS Addon Usage Statistics</h1>
    <hr>
    <div id="refresh-btn" style="width: fit-content; background: #222; border: 1px solid #555; border-radius: 10px; cursor: pointer; position: absolute; right: 0;">
        <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#e3e3e3">
            <path d="M480-160q-133.33 0-226.67-93.33Q160-346.67 160-480q0-133.33 93.33-226.67Q346.67-800 480-800q79.67 0 143.33 32.5 63.67 32.5 110 90.17V-800H800v262.67H537.33V-604h168q-36-58.67-93.83-94T480-733.33q-106 0-179.67 73.66Q226.67-586 226.67-480q0 106 73.66 179.67Q374-226.67 480-226.67q81 0 147.67-46.33 66.66-46.33 93-122.33H790Q761.33-290 675.33-225q-86 65-195.33 65Z"></path>
        </svg>
    </div>
    <table id="stats">
        <tr>
            <th>Addon Name</th>
            <th>Hits In The Last 24 Hours</th>
            <th>Hits In The Last 30 Days</th>
            <th>Unique Users Count</th>
        </tr>
    </table>
    <script type="text/javascript">
        async function refresh() {
            let html = `
                <tr>
                    <th>Addon Name</th>
                    <th>Hits In The Last 24 Hours</th>
                    <th>Hits In The Last 30 Days</th>
                    <th>Unique Users Count</th>
                </tr>
                `;
            let f = await fetch('https://track.tylerbialowas-bard.workers.dev/?f=tylerGithub&t=' + Date.now()); //The "?f=" and "&t=" are for organization and caching prevention; they don't actually do anything in the server.
            let t = await f.text();
            let data = JSON.parse(t).sort((a, b) => b.unique_users_all_time - a.unique_users_all_time);
            for (let d in data) {
                html += `
                <tr>
                    <td>${data[d].script.split('_').join(' ')}</td>
                    <td>${data[d].hits_24h}</td>
                    <td>${data[d].total_hits_30d}</td>
                    <td>${data[d].unique_users_all_time}</td>
                </tr>
                `;
            }
            document.getElementById('stats').innerHTML = html;
        }
        refresh();
        document.getElementById('refresh-btn').addEventListener('pointerdown', refresh);
    </script>
</body>

</html>
